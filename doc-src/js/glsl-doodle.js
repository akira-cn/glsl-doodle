!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.Doodle=t():e.Doodle=t()}(globalThis,(function(){return function(e){var t=globalThis.webpackHotUpdate;globalThis.webpackHotUpdate=function(e,n){!function(e,t){if(!y[e]||!x[e])return;for(var n in x[e]=!1,t)Object.prototype.hasOwnProperty.call(t,n)&&(p[n]=t[n]);0==--_&&0===b&&F()}(e,n),t&&t(e,n)};var n,r=!0,o="5fef02f2061f1f668b27",a={},i=[],s=[];function c(e){var t=U[e];if(!t)return S;var r=function(r){return t.hot.active?(U[r]?-1===U[r].parents.indexOf(e)&&U[r].parents.push(e):(i=[e],n=r),-1===t.children.indexOf(r)&&t.children.push(r)):(console.warn("[HMR] unexpected require("+r+") from disposed module "+e),i=[]),S(r)},o=function(e){return{configurable:!0,enumerable:!0,get:function(){return S[e]},set:function(t){S[e]=t}}};for(var a in S)Object.prototype.hasOwnProperty.call(S,a)&&"e"!==a&&"t"!==a&&Object.defineProperty(r,a,o(a));return r.e=function(e){return"ready"===l&&f("prepare"),b++,S.e(e).then(t,(function(e){throw t(),e}));function t(){b--,"prepare"===l&&(g[e]||D(e),0===b&&0===_&&F())}},r.t=function(e,t){return 1&t&&(e=r(e)),S.t(e,-2&t)},r}function u(t){var r={_acceptedDependencies:{},_declinedDependencies:{},_selfAccepted:!1,_selfDeclined:!1,_selfInvalidated:!1,_disposeHandlers:[],_main:n!==t,active:!0,accept:function(e,t){if(void 0===e)r._selfAccepted=!0;else if("function"==typeof e)r._selfAccepted=e;else if("object"==typeof e)for(var n=0;n<e.length;n++)r._acceptedDependencies[e[n]]=t||function(){};else r._acceptedDependencies[e]=t||function(){}},decline:function(e){if(void 0===e)r._selfDeclined=!0;else if("object"==typeof e)for(var t=0;t<e.length;t++)r._declinedDependencies[e[t]]=!0;else r._declinedDependencies[e]=!0},dispose:function(e){r._disposeHandlers.push(e)},addDisposeHandler:function(e){r._disposeHandlers.push(e)},removeDisposeHandler:function(e){var t=r._disposeHandlers.indexOf(e);t>=0&&r._disposeHandlers.splice(t,1)},invalidate:function(){switch(this._selfInvalidated=!0,l){case"idle":(p={})[t]=e[t],f("ready");break;case"ready":R(t);break;case"prepare":case"check":case"dispose":case"apply":(m=m||[]).push(t)}},check:E,apply:A,status:function(e){if(!e)return l;d.push(e)},addStatusHandler:function(e){d.push(e)},removeStatusHandler:function(e){var t=d.indexOf(e);t>=0&&d.splice(t,1)},data:a[t]};return n=void 0,r}var d=[],l="idle";function f(e){l=e;for(var t=0;t<d.length;t++)d[t].call(null,e)}var v,p,h,m,_=0,b=0,g={},x={},y={};function w(e){return+e+""===e?+e:e}function E(e){if("idle"!==l)throw new Error("check() is only allowed in idle status");return r=e,f("check"),(t=1e4,t=t||1e4,new Promise((function(e,n){if("undefined"==typeof XMLHttpRequest)return n(new Error("No browser support"));try{var r=new XMLHttpRequest,a=S.p+""+o+".hot-update.json";r.open("GET",a,!0),r.timeout=t,r.send(null)}catch(e){return n(e)}r.onreadystatechange=function(){if(4===r.readyState)if(0===r.status)n(new Error("Manifest request to "+a+" timed out."));else if(404===r.status)e();else if(200!==r.status&&304!==r.status)n(new Error("Manifest request to "+a+" failed."));else{try{var t=JSON.parse(r.responseText)}catch(e){return void n(e)}e(t)}}}))).then((function(e){if(!e)return f(T()?"ready":"idle"),null;x={},g={},y=e.c,h=e.h,f("prepare");var t=new Promise((function(e,t){v={resolve:e,reject:t}}));p={};return D(0),"prepare"===l&&0===b&&0===_&&F(),t}));var t}function D(e){y[e]?(x[e]=!0,_++,function(e){var t=document.createElement("script");t.charset="utf-8",t.src=S.p+""+e+"."+o+".hot-update.js",document.head.appendChild(t)}(e)):g[e]=!0}function F(){f("ready");var e=v;if(v=null,e)if(r)Promise.resolve().then((function(){return A(r)})).then((function(t){e.resolve(t)}),(function(t){e.reject(t)}));else{var t=[];for(var n in p)Object.prototype.hasOwnProperty.call(p,n)&&t.push(w(n));e.resolve(t)}}function A(t){if("ready"!==l)throw new Error("apply() is only allowed in ready status");return function t(r){var s,c,u,d,l;function v(e){for(var t=[e],n={},r=t.map((function(e){return{chain:[e],id:e}}));r.length>0;){var o=r.pop(),a=o.id,i=o.chain;if((d=U[a])&&(!d.hot._selfAccepted||d.hot._selfInvalidated)){if(d.hot._selfDeclined)return{type:"self-declined",chain:i,moduleId:a};if(d.hot._main)return{type:"unaccepted",chain:i,moduleId:a};for(var s=0;s<d.parents.length;s++){var c=d.parents[s],u=U[c];if(u){if(u.hot._declinedDependencies[a])return{type:"declined",chain:i.concat([c]),moduleId:a,parentId:c};-1===t.indexOf(c)&&(u.hot._acceptedDependencies[a]?(n[c]||(n[c]=[]),_(n[c],[a])):(delete n[c],t.push(c),r.push({chain:i.concat([c]),id:c})))}}}}return{type:"accepted",moduleId:e,outdatedModules:t,outdatedDependencies:n}}function _(e,t){for(var n=0;n<t.length;n++){var r=t[n];-1===e.indexOf(r)&&e.push(r)}}T();var b={},g=[],x={},E=function(){console.warn("[HMR] unexpected require("+F.moduleId+") to disposed module")};for(var D in p)if(Object.prototype.hasOwnProperty.call(p,D)){var F;l=w(D),F=p[D]?v(l):{type:"disposed",moduleId:D};var A=!1,R=!1,k=!1,O="";switch(F.chain&&(O="\nUpdate propagation: "+F.chain.join(" -> ")),F.type){case"self-declined":r.onDeclined&&r.onDeclined(F),r.ignoreDeclined||(A=new Error("Aborted because of self decline: "+F.moduleId+O));break;case"declined":r.onDeclined&&r.onDeclined(F),r.ignoreDeclined||(A=new Error("Aborted because of declined dependency: "+F.moduleId+" in "+F.parentId+O));break;case"unaccepted":r.onUnaccepted&&r.onUnaccepted(F),r.ignoreUnaccepted||(A=new Error("Aborted because "+l+" is not accepted"+O));break;case"accepted":r.onAccepted&&r.onAccepted(F),R=!0;break;case"disposed":r.onDisposed&&r.onDisposed(F),k=!0;break;default:throw new Error("Unexception type "+F.type)}if(A)return f("abort"),Promise.reject(A);if(R)for(l in x[l]=p[l],_(g,F.outdatedModules),F.outdatedDependencies)Object.prototype.hasOwnProperty.call(F.outdatedDependencies,l)&&(b[l]||(b[l]=[]),_(b[l],F.outdatedDependencies[l]));k&&(_(g,[F.moduleId]),x[l]=E)}var P,B=[];for(c=0;c<g.length;c++)l=g[c],U[l]&&U[l].hot._selfAccepted&&x[l]!==E&&!U[l].hot._selfInvalidated&&B.push({module:l,parents:U[l].parents.slice(),errorHandler:U[l].hot._selfAccepted});f("dispose"),Object.keys(y).forEach((function(e){!1===y[e]&&function(e){delete installedChunks[e]}(e)}));var I,L,M=g.slice();for(;M.length>0;)if(l=M.pop(),d=U[l]){var C={},N=d.hot._disposeHandlers;for(u=0;u<N.length;u++)(s=N[u])(C);for(a[l]=C,d.hot.active=!1,delete U[l],delete b[l],u=0;u<d.children.length;u++){var j=U[d.children[u]];j&&((P=j.parents.indexOf(l))>=0&&j.parents.splice(P,1))}}for(l in b)if(Object.prototype.hasOwnProperty.call(b,l)&&(d=U[l]))for(L=b[l],u=0;u<L.length;u++)I=L[u],(P=d.children.indexOf(I))>=0&&d.children.splice(P,1);f("apply"),void 0!==h&&(o=h,h=void 0);for(l in p=void 0,x)Object.prototype.hasOwnProperty.call(x,l)&&(e[l]=x[l]);var G=null;for(l in b)if(Object.prototype.hasOwnProperty.call(b,l)&&(d=U[l])){L=b[l];var H=[];for(c=0;c<L.length;c++)if(I=L[c],s=d.hot._acceptedDependencies[I]){if(-1!==H.indexOf(s))continue;H.push(s)}for(c=0;c<H.length;c++){s=H[c];try{s(L)}catch(e){r.onErrored&&r.onErrored({type:"accept-errored",moduleId:l,dependencyId:L[c],error:e}),r.ignoreErrored||G||(G=e)}}}for(c=0;c<B.length;c++){var X=B[c];l=X.module,i=X.parents,n=l;try{S(l)}catch(e){if("function"==typeof X.errorHandler)try{X.errorHandler(e)}catch(t){r.onErrored&&r.onErrored({type:"self-accept-error-handler-errored",moduleId:l,error:t,originalError:e}),r.ignoreErrored||G||(G=t),G||(G=e)}else r.onErrored&&r.onErrored({type:"self-accept-errored",moduleId:l,error:e}),r.ignoreErrored||G||(G=e)}}if(G)return f("fail"),Promise.reject(G);if(m)return t(r).then((function(e){return g.forEach((function(t){e.indexOf(t)<0&&e.push(t)})),e}));return f("idle"),new Promise((function(e){e(g)}))}(t=t||{})}function T(){if(m)return p||(p={}),m.forEach(R),m=void 0,!0}function R(t){Object.prototype.hasOwnProperty.call(p,t)||(p[t]=e[t])}var U={};function S(t){if(U[t])return U[t].exports;var n=U[t]={i:t,l:!1,exports:{},hot:u(t),parents:(s=i,i=[],s),children:[]};return e[t].call(n.exports,n,n.exports,c(t)),n.l=!0,n.exports}return S.m=e,S.c=U,S.d=function(e,t,n){S.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},S.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},S.t=function(e,t){if(1&t&&(e=S(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(S.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)S.d(n,r,function(t){return e[t]}.bind(null,r));return n},S.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return S.d(t,"a",t),t},S.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},S.p="/js/",S.h=function(){return o},c(25)(S.s=25)}([function(e,t,n){e.exports=n(32)},function(e,t){function n(e,t,n,r,o,a,i){try{var s=e[a](i),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,o)}e.exports=function(e){return function(){var t=this,r=arguments;return new Promise((function(o,a){var i=e.apply(t,r);function s(e){n(i,o,a,s,c,"next",e)}function c(e){n(i,o,a,s,c,"throw",e)}s(void 0)}))}},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t,n){var r=n(26),o=n(27),a=n(10),i=n(28);e.exports=function(e,t){return r(e)||o(e,t)||a(e,t)||i()},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t){e.exports=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t){function n(t){return e.exports=n=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},e.exports.default=e.exports,e.exports.__esModule=!0,n(t)}e.exports=n,e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t){e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t){function n(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}e.exports=function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t,n){var r=n(29);function o(t,n,a){return"undefined"!=typeof Reflect&&Reflect.get?(e.exports=o=Reflect.get,e.exports.default=e.exports,e.exports.__esModule=!0):(e.exports=o=function(e,t,n){var o=r(e,t);if(o){var a=Object.getOwnPropertyDescriptor(o,t);return a.get?a.get.call(n):a.value}},e.exports.default=e.exports,e.exports.__esModule=!0),o(t,n,a||t)}e.exports=o,e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t){e.exports="#ifdef GL_ES\nprecision mediump float;\n#endif\nvoid main() {\n\tgl_FragColor = vec4(0.0, 0.0, 0.0, 0.1);\n}\n"},function(e,t){function n(t){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?(e.exports=n=function(e){return typeof e},e.exports.default=e.exports,e.exports.__esModule=!0):(e.exports=n=function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.default=e.exports,e.exports.__esModule=!0),n(t)}e.exports=n,e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t,n){var r=n(11);e.exports=function(e,t){if(e){if("string"==typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t){e.exports=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t,n){var r=n(30);e.exports=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&r(e,t)},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t,n){var r=n(9).default,o=n(31);e.exports=function(e,t){if(t&&("object"===r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return o(e)},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t,n){var r=n(33),o=n(34),a=n(10),i=n(35);e.exports=function(e){return r(e)||o(e)||a(e)||i()},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t){e.exports="attribute vec3 a_vertexPosition;\nvoid main() {\n\tgl_PointSize = 1.0;\n\tgl_Position = vec4(a_vertexPosition, 1);\n}\n"},function(e,t){e.exports="attribute vec4 a_vertexPosition;\nattribute vec2 a_vertexTextureCoord;\nvarying vec2 vTextureCoord;\nvoid main() {\n\tgl_PointSize = 1.0;\n\tgl_Position = a_vertexPosition;\n\tvTextureCoord = a_vertexTextureCoord;\n}\n"},function(e,t){e.exports="#ifndef M_STDLIB\n#define M_STDLIB\n#ifndef PI\n#define PI 3.141592653589793\n#endif\n#ifndef FLT_EPSILON\n#define FLT_EPSILON 0.000001\n#endif\nfloat atan2(float dy, float dx) {\n\tfloat ax = abs(dx);\n\tfloat ay = abs(dy);\n\tfloat a = min(ax, ay) / (max(ax, ay) + FLT_EPSILON);\n\tfloat s = a * a;\n\tfloat r = ((((((-0.0464964749 * s) + 0.15931422) * s) - 0.327622764) * s) * a) + a;\n\tif (ay > ax)\n\t\tr = 1.57079637 - r;\n\tif (dx < 0.0)\n\t\tr = PI - r;\n\tif (dy < 0.0)\n\t\tr = -r;\n\treturn r;\n}\nfloat atan2(vec2 v) {\n\treturn atan2(v.y, v.x);\n}\nfloat angle(vec2 v1, vec2 v2) {\n\tfloat ang = atan2(v1) - atan2(v2);\n\tif (ang < 0.0)\n\t\tang += (2.0 * PI);\n\treturn ang;\n}\nfloat angle(vec2 v) {\n\treturn angle(v, vec2(1.0, 0.0));\n}\nvec2 center(vec2 v) {\n\treturn v * 0.5;\n}\nvec2 center(vec2 v1, vec2 v2) {\n\treturn (v1 + v2) * 0.5;\n}\nhighp float random(vec2 co) {\n\thighp float a = 12.9898;\n\thighp float b = 78.233;\n\thighp float c = 43758.5453;\n\thighp float dt = dot(co.xy, vec2(a, b));\n\thighp float sn = mod(dt, 3.14);\n\treturn fract(sin(sn) * c);\n}\nhighp float random(vec2 st, float a, float b) {\n\thighp float p = random(st);\n\treturn mix(a, b, p);\n}\nhighp vec2 random2(vec2 st) {\n\thighp vec2 v = vec2(dot(st, vec2(127.1, 311.7)), dot(st, vec2(269.5, 183.3)));\n\treturn -1.0 + (2.0 * fract(sin(v) * 43758.5453123));\n}\nhighp vec3 random3(vec2 st) {\n\thighp vec3 v = vec3(random2(st), random(st));\n\treturn v;\n}\nhighp float noise(vec2 st) {\n\tvec2 i = floor(st);\n\tvec2 f = fract(st);\n\tvec2 u = (f * f) * (3.0 - (2.0 * f));\n\treturn mix(mix(random(i + vec2(0.0, 0.0)), random(i + vec2(1.0, 0.0)), u.x), mix(random(i + vec2(0.0, 1.0)), random(i + vec2(1.0, 1.0)), u.x), u.y);\n}\nhighp float noise(vec3 p) {\n\tvec3 i = floor(p);\n\tvec4 a = dot(i, vec3(1.0, 57.0, 21.0)) + vec4(0.0, 57.0, 21.0, 78.0);\n\tvec3 f = (cos((p - i) * acos(-1.0)) * -0.5) + 0.5;\n\ta = mix(sin(cos(a) * a), sin(cos(1.0 + a) * (1.0 + a)), f.x);\n\ta.xy = mix(a.xz, a.yw, f.y);\n\treturn mix(a.x, a.y, f.z);\n}\nvec2 polar(vec2 st, vec2 c) {\n\tvec2 p = c - st;\n\tfloat r = length(p) * 2.0;\n\tfloat a = atan(p.y, p.x);\n\treturn vec2(r, a);\n}\nvec2 polar(vec2 st) {\n\treturn polar(st, vec2(0.5));\n}\n#endif\n"},function(e,t){e.exports="#ifndef MOD_SHAPES\n#define MOD_SHAPES\nUDF shape_blade(vec2 st, vec2 center, float num) {\n\tvec2 pt = polar(st, vec2(center));\n\tfloat x = pt.x;\n\tfloat y = cos(pt.y * num);\n\treturn smoothstep(x - 0.01, x + 0.01, y);\n}\nUDF shape_blade3(vec2 st, vec2 center) {\n\treturn shape_blade(st, center, 3.0);\n}\nUDF shape_blade3(vec2 st) {\n\treturn shape_blade(st, vec2(0.5), 3.0);\n}\nUDF shape_blade4(vec2 st, vec2 center) {\n\treturn shape_blade(st, center, 4.0);\n}\nUDF shape_blade4(vec2 st) {\n\treturn shape_blade(st, vec2(0.5), 4.0);\n}\nUDF shape_blade5(vec2 st, vec2 center) {\n\treturn shape_blade(st, center, 5.0);\n}\nUDF shape_blade5(vec2 st) {\n\treturn shape_blade(st, vec2(0.5), 5.0);\n}\nUDF shape_infinity(vec2 st, vec2 center) {\n\treturn shape_blade(st, center, 2.0);\n}\nUDF shape_infinity(vec2 st) {\n\treturn shape_blade(st, vec2(0.5), 2.0);\n}\nUDF shape_clover(vec2 st, vec2 center, float num) {\n\tvec2 pt = polar(st, vec2(center));\n\tfloat x = pt.x;\n\tfloat y = abs(cos((pt.y * num) * 0.5));\n\treturn smoothstep(x - 0.01, x + 0.01, y);\n}\nUDF shape_bean(vec2 st, vec2 center) {\n\treturn shape_clover(st, center, 1.0);\n}\nUDF shape_bean(vec2 st) {\n\treturn shape_clover(st, vec2(0.5), 1.0);\n}\nUDF shape_apple(vec2 st, vec2 center) {\n\treturn shape_clover(vec2(st.y - 0.2, st.x), center, 1.3);\n}\nUDF shape_apple(vec2 st) {\n\treturn shape_clover(vec2(st.y - 0.2, st.x), vec2(0.5), 1.3);\n}\nUDF shape_clover3(vec2 st, vec2 center) {\n\treturn shape_clover(st, center, 3.0);\n}\nUDF shape_clover3(vec2 st) {\n\treturn shape_clover(st, vec2(0.5), 3.0);\n}\nUDF shape_clover4(vec2 st, vec2 center) {\n\treturn shape_clover(st, center, 4.0);\n}\nUDF shape_clover4(vec2 st) {\n\treturn shape_clover(st, vec2(0.5), 4.0);\n}\nUDF shape_clover5(vec2 st, vec2 center) {\n\treturn shape_clover(st, center, 5.0);\n}\nUDF shape_clover5(vec2 st) {\n\treturn shape_clover(st, vec2(0.5), 5.0);\n}\nUDF shape_flower(vec2 st, vec2 center, float num) {\n\tvec2 pt = polar(st, vec2(center));\n\tfloat x = pt.x;\n\tfloat y = (abs(cos((pt.y * num) * 0.5)) * 0.5) + 0.3;\n\treturn smoothstep(x - 0.01, x + 0.01, y);\n}\nUDF shape_gourd(vec2 st, vec2 center) {\n\treturn shape_flower(vec2(st.y, st.x), center, 1.7);\n}\nUDF shape_gourd(vec2 st) {\n\treturn shape_flower(vec2(st.y, st.x), vec2(0.5), 1.7);\n}\nUDF shape_flower3(vec2 st, vec2 center) {\n\treturn shape_flower(st, center, 3.0);\n}\nUDF shape_flower3(vec2 st) {\n\treturn shape_flower(st, vec2(0.5), 3.0);\n}\nUDF shape_flower4(vec2 st, vec2 center) {\n\treturn shape_flower(st, center, 4.0);\n}\nUDF shape_flower4(vec2 st) {\n\treturn shape_flower(st, vec2(0.5), 4.0);\n}\nUDF shape_flower5(vec2 st, vec2 center) {\n\treturn shape_flower(st, center, 5.0);\n}\nUDF shape_flower5(vec2 st) {\n\treturn shape_flower(st, vec2(0.5), 5.0);\n}\nUDF shape_bud(vec2 st, vec2 center, float num) {\n\tvec2 pt = polar(st, vec2(center));\n\tfloat x = pt.x;\n\tfloat y = (smoothstep(-0.5, 1.0, cos(pt.y * num)) * 0.2) + 0.5;\n\treturn smoothstep(x - 0.01, x + 0.01, y);\n}\nUDF shape_bud5(vec2 st, vec2 center) {\n\treturn shape_bud(st, center, 5.0);\n}\nUDF shape_bud5(vec2 st) {\n\treturn shape_bud(st, vec2(0.5), 5.0);\n}\nUDF shape_bud8(vec2 st, vec2 center) {\n\treturn shape_bud(st, center, 8.0);\n}\nUDF shape_bud8(vec2 st) {\n\treturn shape_bud(st, vec2(0.5), 8.0);\n}\nUDF shape_bud10(vec2 st, vec2 center) {\n\treturn shape_bud(st, center, 10.0);\n}\nUDF shape_bud10(vec2 st) {\n\treturn shape_bud(st, vec2(0.5), 10.0);\n}\nUDF shape_bud12(vec2 st, vec2 center) {\n\treturn shape_bud(st, center, 12.0);\n}\nUDF shape_bud12(vec2 st) {\n\treturn shape_bud(st, vec2(0.5), 12.0);\n}\nUDF shape_star(vec2 st, vec2 center) {\n\tfloat r = 0.45;\n\tfloat d = regular_polygon(st, center, r, 5);\n\tfloat a = (-2.0 * PI) / 5.0;\n\td = fill(d, 0.01);\n\tvec2 v0 = vec2(0, r);\n\tfor (int i = 0; i < 5; i++) {\n\t\tvec2 v1 = rotate(v0, float(i) * a);\n\t\tvec2 v2 = rotate(v0, float(i + 1) * a);\n\t\tfloat l = length(v2 - v1);\n\t\tfloat c = 0.5 / cos(PI / 5.0);\n\t\tvec2 p = rotate(v2, v1, -PI / 5.0);\n\t\tp += ((1.0 - c) * (v1 - p));\n\t\tfloat d2 = sdf_triangle(st - center, v1, v2, p);\n\t\td2 = fill(d2, 0.01);\n\t\td = udf_complement(d, d2);\n\t}\n\treturn d;\n}\nUDF shape_regular_polygon(vec2 st, vec2 center, const int edges) {\n\tfloat d = regular_polygon(st, center, 0.45, edges);\n\treturn fill(d, 0.01);\n}\nUDF shape_star(vec2 st) {\n\treturn shape_star(st, vec2(0.5));\n}\nUDF shape_triangle(vec2 st, vec2 center) {\n\treturn shape_regular_polygon(st, center, 3);\n}\nUDF shape_triangle(vec2 st) {\n\treturn shape_regular_polygon(st, vec2(0.5), 3);\n}\nUDF shape_rhombus(vec2 st, vec2 center) {\n\treturn shape_regular_polygon(st, center, 4);\n}\nUDF shape_rhombus(vec2 st) {\n\treturn shape_regular_polygon(st, vec2(0.5), 4);\n}\nUDF shape_pentagon(vec2 st, vec2 center) {\n\treturn shape_regular_polygon(st, center, 5);\n}\nUDF shape_pentagon(vec2 st) {\n\treturn shape_regular_polygon(st, vec2(0.5), 5);\n}\nUDF shape_hexagon(vec2 st, vec2 center) {\n\treturn shape_regular_polygon(st, center, 6);\n}\nUDF shape_hexagon(vec2 st) {\n\treturn shape_regular_polygon(st, vec2(0.5), 6);\n}\nUDF shape_heptagon(vec2 st, vec2 center) {\n\treturn shape_regular_polygon(st, center, 7);\n}\nUDF shape_heptagon(vec2 st) {\n\treturn shape_regular_polygon(st, vec2(0.5), 7);\n}\nUDF shape_octagon(vec2 st, vec2 center) {\n\treturn shape_regular_polygon(st, center, 8);\n}\nUDF shape_octagon(vec2 st) {\n\treturn shape_regular_polygon(st, vec2(0.5), 8);\n}\nUDF shape_hypocycloid(vec2 st, vec2 center, const int edges) {\n\tfloat d = regular_polygon(st, center, 0.45, edges, true);\n\treturn fill(d, 0.01);\n}\nUDF shape_hypocycloid(vec2 st, const int edges) {\n\treturn shape_hypocycloid(st, vec2(0.5), edges);\n}\nUDF shape_cross(vec2 st, vec2 center, float w, float h) {\n\tvec2 p1 = center - (0.5 * vec2(w, h));\n\tvec2 p2 = center - (0.5 * vec2(h, w));\n\tfloat d1 = sdf_rect(st, p1, w, h);\n\tfloat d2 = sdf_rect(st, p2, h, w);\n\treturn fill(udf_union(d1, d2), 0.01);\n}\nUDF shape_cross(vec2 st, vec2 center) {\n\treturn shape_cross(st, center, 0.8, 0.2);\n}\nUDF shape_cross(vec2 st, float w, float h) {\n\treturn shape_cross(st, vec2(0.5), w, h);\n}\nUDF shape_cross(vec2 st) {\n\treturn shape_cross(st, vec2(0.5), 0.8, 0.2);\n}\n#endif\n"},function(e,t){e.exports="#ifndef M_SHAPER\n#define M_SHAPER\nfloat quadratic_bezier(float x, float a, float b) {\n\tfloat epsilon = 0.00001;\n\ta = max(0.0, min(1.0, a));\n\tb = max(0.0, min(1.0, b));\n\tif (a == 0.5) {\n\t\ta += epsilon;\n\t}\n\tfloat om2a = 1.0 - (2.0 * a);\n\tfloat t = (sqrt((a * a) + (om2a * x)) - a) / om2a;\n\tfloat y = ((1.0 - (2.0 * b)) * (t * t)) + ((2.0 * b) * t);\n\treturn y;\n}\nfloat slope_from_t(float t, float A, float B, float C) {\n\tfloat dtdx = 1.0 / (((((3.0 * A) * t) * t) + ((2.0 * B) * t)) + C);\n\treturn dtdx;\n}\nfloat x_from_t(float t, float A, float B, float C, float D) {\n\tfloat x = (((A * ((t * t) * t)) + (B * (t * t))) + (C * t)) + D;\n\treturn x;\n}\nfloat y_from_t(float t, float E, float F, float G, float H) {\n\tfloat y = (((E * ((t * t) * t)) + (F * (t * t))) + (G * t)) + H;\n\treturn y;\n}\nfloat cubic_bezier(float x, float a, float b, float c, float d) {\n\tfloat y0a = 0.00;\n\tfloat x0a = 0.00;\n\tfloat y1a = b;\n\tfloat x1a = a;\n\tfloat y2a = d;\n\tfloat x2a = c;\n\tfloat y3a = 1.00;\n\tfloat x3a = 1.00;\n\tfloat A = ((x3a - (3.0 * x2a)) + (3.0 * x1a)) - x0a;\n\tfloat B = ((3.0 * x2a) - (6.0 * x1a)) + (3.0 * x0a);\n\tfloat C = (3.0 * x1a) - (3.0 * x0a);\n\tfloat D = x0a;\n\tfloat E = ((y3a - (3.0 * y2a)) + (3.0 * y1a)) - y0a;\n\tfloat F = ((3.0 * y2a) - (6.0 * y1a)) + (3.0 * y0a);\n\tfloat G = (3.0 * y1a) - (3.0 * y0a);\n\tfloat H = y0a;\n\tfloat currentt = x;\n\tconst int nRefinementIterations = 5;\n\tfor (int i = 0; i < nRefinementIterations; i++) {\n\t\tfloat currentx = x_from_t(currentt, A, B, C, D);\n\t\tfloat currentslope = slope_from_t(currentt, A, B, C);\n\t\tcurrentt -= ((currentx - x) * currentslope);\n\t\tcurrentt = clamp(currentt, 0.0, 1.0);\n\t}\n\tfloat y = y_from_t(currentt, E, F, G, H);\n\treturn y;\n}\n#endif\n"},function(e,t){e.exports="#ifndef MOD_BOX\n#define MOD_BOX\nstruct box2 {\n\tvec2 a;\n\tvec2 b;\n\tvec2 c;\n\tvec2 d;\n};\nvec2 center(box2 box) {\n\treturn (box.a + box.c) * 0.5;\n}\nbox2 create_box(vec2 point, float w, float h, vec2 anchor) {\n\tvec2 size = vec2(w, h);\n\tvec2 a = point + (size * (vec2(0.0) - anchor));\n\tvec2 b = point + (size * (vec2(1.0, 0.0) - anchor));\n\tvec2 c = point + (size * (vec2(1.0) - anchor));\n\tvec2 d = point + (size * (vec2(0.0, 1.0) - anchor));\n\treturn box2(a, b, c, d);\n}\nbox2 create_box(vec2 point, float w, float h) {\n\treturn create_box(point, w, h, vec2(0.0));\n}\nbox2 create_box(vec2 point, float wh) {\n\treturn create_box(point, wh, wh, vec2(0.0));\n}\nbox2 create_box(float w, float h) {\n\treturn create_box(vec2(0.0), w, h, vec2(0.0));\n}\nbox2 create_box(float wh) {\n\treturn create_box(vec2(0.0), wh, wh, vec2(0.0));\n}\nbox2 create_box() {\n\treturn create_box(vec2(0.0), 1.0, 1.0, vec2(0.0));\n}\nvec2 box_quad(vec2 p, box2 box) {\n\tvec2 a = box.a;\n\tvec2 b = box.b;\n\tvec2 c = box.c;\n\tvec2 d = box.d;\n\tfloat d1 = sdf_line(p, a, b);\n\tfloat d2 = sdf_line(p, b, c);\n\tfloat d3 = sdf_line(p, c, d);\n\tfloat d4 = sdf_line(p, d, a);\n\tif (((((d1 >= 0.0) && (d2 >= 0.0)) && (d3 >= 0.0)) && (d4 >= 0.0)) || ((((d1 <= 0.0) && (d2 <= 0.0)) && (d3 <= 0.0)) && (d4 <= 0.0))) {\n\t\tvec2 v1 = b - a;\n\t\tvec2 v2 = d - a;\n\t\tvec2 vp = p - a;\n\t\tfloat l1 = length(v1);\n\t\tfloat l2 = length(v2);\n\t\tfloat p1 = dot(vp, v1) / l1;\n\t\tfloat p2 = dot(vp, v2) / l2;\n\t\tfloat ang = angle(v2, v1);\n\t\tfloat x = p1 - (abs(d1) / tan(ang));\n\t\tfloat y = p2 - (abs(d4) / tan(ang));\n\t\tx /= l1;\n\t\ty /= l2;\n\t\treturn vec2(x, y);\n\t}\n\treturn vec2(-1.0);\n}\nbox2 transform(box2 box, mat3 matrix) {\n\treturn box2(transform(box.a, matrix), transform(box.b, matrix), transform(box.c, matrix), transform(box.d, matrix));\n}\nbox2 translate(box2 box, vec2 xy) {\n\treturn box2(translate(box.a, xy), translate(box.b, xy), translate(box.c, xy), translate(box.d, xy));\n}\nbox2 scale(box2 box, vec2 origin, vec2 scaleXY) {\n\treturn box2(scale(box.a, origin, scaleXY), scale(box.b, origin, scaleXY), scale(box.c, origin, scaleXY), scale(box.d, origin, scaleXY));\n}\nbox2 scale(box2 box, vec2 scaleXY) {\n\treturn box2(scale(box.a, scaleXY), scale(box.b, scaleXY), scale(box.c, scaleXY), scale(box.d, scaleXY));\n}\nbox2 rotate(box2 box, vec2 origin, float ang) {\n\treturn box2(rotate(box.a, origin, ang), rotate(box.b, origin, ang), rotate(box.c, origin, ang), rotate(box.d, origin, ang));\n}\nbox2 rotate(box2 box, float ang) {\n\treturn box2(rotate(box.a, ang), rotate(box.b, ang), rotate(box.c, ang), rotate(box.d, ang));\n}\nbox2 skew(box2 box, vec2 origin, vec2 skewXY) {\n\treturn box2(skew(box.a, origin, skewXY), skew(box.b, origin, skewXY), skew(box.c, origin, skewXY), skew(box.d, origin, skewXY));\n}\nbox2 skew(box2 box, vec2 skewXY) {\n\treturn box2(skew(box.a, skewXY), skew(box.b, skewXY), skew(box.c, skewXY), skew(box.d, skewXY));\n}\n#endif\n"},function(e,t){e.exports="#ifndef MOD_TRANSFORM\n#define MOD_TRANSFORM\nvec2 transform(vec2 v0, mat3 matrix) {\n\treturn vec2(matrix * vec3(v0, 1.0));\n}\nvec2 translate(vec2 v0, vec2 xy) {\n\tmat3 m = mat3(1, 0, 0, 0, 1, 0, xy.x, xy.y, 1);\n\treturn transform(v0, m);\n}\nvec2 scale(vec2 v0, vec2 origin, vec2 scale) {\n\tmat3 m = mat3(scale.x, 0, 0, 0, scale.y, 0, 0, 0, 1);\n\treturn transform(v0 - origin, m) + origin;\n}\nvec2 scale(vec2 v0, vec2 scaleXY) {\n\treturn scale(v0, vec2(0.0), scaleXY);\n}\nvec2 rotate(vec2 v0, vec2 origin, float ang) {\n\tfloat sinA = sin(ang);\n\tfloat cosA = cos(ang);\n\tmat3 m = mat3(cosA, -sinA, 0, sinA, cosA, 0, 0, 0, 1);\n\treturn transform(v0 - origin, m) + origin;\n}\nvec2 rotate(vec2 v0, float ang) {\n\treturn rotate(v0, vec2(0.0), ang);\n}\nvec2 skew(vec2 v0, vec2 origin, vec2 skew) {\n\tmat3 m = mat3(1, tan(skew.y), 0, tan(skew.x), 1, 0, 0, 0, 1);\n\treturn transform(v0 - origin, m) + origin;\n}\nvec2 skew(vec2 v0, vec2 skewXY) {\n\treturn skew(v0, vec2(0.0), skewXY);\n}\n#endif\n"},function(e,t){e.exports="#ifndef M_GRAPH\n#define M_GRAPH\n#pragma include <stdlib>\n#pragma include <shaper>\n#pragma include <transform>\n#ifndef SDF\n#define SDF float\n#endif\n#ifndef UDF\n#define UDF float\n#endif\n#ifndef PLOT\n#define PLOT(f, st, step) sdf_plot(st, vec2(st.x - step, f(st.x - step)), vec2(st.x, f(st.x)), vec2(st.x + step, f(st.x + step)))\n#endif\n#ifndef SPRITE\n#define SPRITE(quad, f) if(quad.x >= 0.0 && quad.x <= 1.0) f(quad);\n#endif\nSDF sdf_line(vec2 p, vec2 v1, vec2 v2) {\n\tvec2 pd = p - v1;\n\tvec2 pd2 = p - v2;\n\tvec2 seg = v2 - v1;\n\treturn ((pd.x * seg.y) - (pd.y * seg.x)) / length(seg);\n}\nSDF sdf_line(vec2 p, vec2 v) {\n\treturn sdf_line(p, vec2(0), v);\n}\nSDF sdf_seg(vec2 p, vec2 v1, vec2 v2) {\n\tvec2 pd = p - v1;\n\tvec2 pd2 = p - v2;\n\tvec2 seg = v2 - v1;\n\tfloat l = length(seg);\n\tfloat d = abs((pd.x * seg.y) - (pd.y * seg.x)) / l;\n\tfloat proj = ((pd.x * seg.x) + (pd.y * seg.y)) / l;\n\tif ((proj >= 0.0) && (proj <= l))\n\t\treturn d;\n\treturn min(length(pd), length(pd2));\n}\nSDF sdf_seg(vec2 p, vec2 v) {\n\treturn sdf_seg(p, vec2(0), v);\n}\nSDF sdf_plot(vec2 p, vec2 v1, vec2 v2, vec2 v3) {\n\tfloat d1 = sdf_seg(p, v1, v2);\n\tfloat d2 = sdf_seg(p, v2, v3);\n\treturn min(d1, d2);\n}\nUDF stroke(SDF d, float d0, float w, float smth) {\n\tfloat th = 0.5 * w;\n\tsmth = smth * w;\n\tfloat start = d0 - th;\n\tfloat end = d0 + th;\n\treturn smoothstep(start, start + smth, d) - smoothstep(end - smth, end, d);\n}\nUDF stroke(SDF d, float w, float smth) {\n\treturn stroke(d, 0.0, w, smth);\n}\nUDF stroke(SDF d, float w) {\n\treturn stroke(d, 0.0, w, 0.0);\n}\nSDF sdf_triangle(vec2 st, vec2 a, vec2 b, vec2 c) {\n\tvec2 va = a - b;\n\tvec2 vb = b - c;\n\tvec2 vc = c - a;\n\tfloat d1 = sdf_line(st, a, b);\n\tfloat d2 = sdf_line(st, b, c);\n\tfloat d3 = sdf_line(st, c, a);\n\tfloat l = abs((va.x * vb.y) - (va.y * vb.x)) / ((length(va) + length(vb)) + length(vc));\n\tif ((((d1 >= 0.0) && (d2 >= 0.0)) && (d3 >= 0.0)) || (((d1 <= 0.0) && (d2 <= 0.0)) && (d3 <= 0.0))) {\n\t\treturn min(abs(d1), min(abs(d2), abs(d3))) / l;\n\t}\n\td1 = sdf_seg(st, a, b);\n\td2 = sdf_seg(st, b, c);\n\td3 = sdf_seg(st, c, a);\n\treturn -min(abs(d1), min(abs(d2), abs(d3))) / l;\n}\nSDF sdf_rect(vec2 st, vec2 p, float w, float h) {\n\tvec2 a = p;\n\tvec2 b = p + vec2(w, 0.0);\n\tvec2 c = p + vec2(w, h);\n\tvec2 d = p + vec2(0.0, h);\n\tfloat d1 = sdf_line(st, a, b);\n\tfloat d2 = sdf_line(st, b, c);\n\tfloat d3 = sdf_line(st, c, d);\n\tfloat d4 = sdf_line(st, d, a);\n\tfloat l = min(w, h) * 0.5;\n\tif (((((d1 >= 0.0) && (d2 >= 0.0)) && (d3 >= 0.0)) && (d4 >= 0.0)) || ((((d1 <= 0.0) && (d2 <= 0.0)) && (d3 <= 0.0)) && (d4 <= 0.0))) {\n\t\treturn min(abs(d1), min(abs(d2), min(abs(d3), abs(d4)))) / l;\n\t}\n\td1 = sdf_seg(st, a, b);\n\td2 = sdf_seg(st, b, c);\n\td3 = sdf_seg(st, c, d);\n\td4 = sdf_seg(st, d, a);\n\treturn -min(abs(d1), min(abs(d2), min(abs(d3), abs(d4)))) / l;\n}\nSDF sdf_circle(vec2 st, vec2 c, float r) {\n\treturn 1.0 - (length(st - c) / r);\n}\nSDF sdf_ellipse(vec2 st, vec2 c, float a, float b) {\n\tvec2 p = st - c;\n\treturn 1.0 - sqrt(pow(p.x / a, 2.0) + pow(p.y / b, 2.0));\n}\nSDF sdf_ellipse(vec2 st, vec2 c, float a, float b, float sAng, float eAng) {\n\tvec2 ua = vec2(cos(sAng), sin(sAng));\n\tvec2 ub = vec2(cos(eAng), sin(eAng));\n\tfloat d1 = sdf_line(st, c, ua + c);\n\tfloat d2 = sdf_line(st, c, ub + c);\n\tfloat d3 = sdf_ellipse(st, c, a, b);\n\tfloat r = min(a, b);\n\tvec2 v = st - c;\n\tfloat ang = angle(v, vec2(1.0, 0));\n\tif ((eAng - sAng) > (2.0 * PI)) {\n\t\treturn d3;\n\t}\n\tif ((ang >= sAng) && (ang <= eAng)) {\n\t\tfloat m = max(a, b);\n\t\tfloat d11 = sdf_seg(st, c, (ua * m) + c);\n\t\tfloat d12 = sdf_seg(st, c, (ub * m) + c);\n\t\tif (d3 >= 0.0) {\n\t\t\treturn min(abs(d11 / r), min(abs(d12 / r), d3));\n\t\t}\n\t\treturn d3;\n\t}\n\tfloat pa = dot(ua, v);\n\tfloat pb = dot(ub, v);\n\tif ((pa < 0.0) && (pb < 0.0)) {\n\t\treturn -length(st - c) / r;\n\t}\n\tif ((d1 > 0.0) && (pa >= 0.0)) {\n\t\tvec2 va = pa * ua;\n\t\tfloat da = pow(va.x / a, 2.0) + pow(va.y / b, 2.0);\n\t\tif ((d3 > 0.0) || (da <= pow(1.0 + abs(d1 / r), 2.0))) {\n\t\t\treturn -abs(d1 / r);\n\t\t}\n\t\telse {\n\t\t\treturn d3;\n\t\t}\n\t}\n\tif ((d2 < 0.0) && (pb >= 0.0)) {\n\t\tvec2 vb = pb * ub;\n\t\tfloat db = pow(vb.x / a, 2.0) + pow(vb.y / b, 2.0);\n\t\tif ((d3 >= 0.0) || (db <= pow(1.0 + abs(d2 / r), 2.0))) {\n\t\t\treturn -abs(d2 / r);\n\t\t}\n\t\telse {\n\t\t\treturn d3;\n\t\t}\n\t}\n}\nSDF sdf_arc(vec2 st, vec2 c, float r, float sAng, float eAng) {\n\treturn sdf_ellipse(st, c, r, r, sAng, eAng);\n}\nSDF sdf_rhombus(vec2 st, vec2 cr, float w, float h) {\n\tvec2 a = cr - vec2(0.5 * w, 0);\n\tvec2 b = cr - vec2(0, 0.5 * h);\n\tvec2 c = cr + vec2(0.5 * w, 0);\n\tvec2 d = cr + vec2(0, 0.5 * h);\n\tvec2 va = a - b;\n\tvec2 vb = b - c;\n\tvec2 vc = c - d;\n\tvec2 vd = d - a;\n\tfloat d1 = sdf_line(st, a, b);\n\tfloat d2 = sdf_line(st, b, c);\n\tfloat d3 = sdf_line(st, c, d);\n\tfloat d4 = sdf_line(st, d, a);\n\tfloat l = min(w, h) * 0.5;\n\tif (((((d1 >= 0.0) && (d2 >= 0.0)) && (d3 >= 0.0)) && (d4 >= 0.0)) || ((((d1 <= 0.0) && (d2 <= 0.0)) && (d3 <= 0.0)) && (d4 <= 0.0))) {\n\t\treturn min(abs(d1), min(abs(d2), min(abs(d3), abs(d4)))) / l;\n\t}\n\td1 = sdf_seg(st, a, b);\n\td2 = sdf_seg(st, b, c);\n\td3 = sdf_seg(st, c, d);\n\td4 = sdf_seg(st, d, a);\n\treturn -min(abs(d1), min(abs(d2), min(abs(d3), abs(d4)))) / l;\n}\nSDF regular_polygon(vec2 st, vec2 center, float r, float rotation, const int edges, bool hypocycloid) {\n\tvec2 p = st - center;\n\tvec2 v0 = vec2(0, r);\n\tv0 = rotate(v0, -rotation);\n\tfloat a = (2.0 * PI) / float(edges);\n\tfloat ang = angle(v0, p);\n\tang = floor(ang / a);\n\tvec2 v1 = rotate(v0, a * ang);\n\tvec2 v2 = rotate(v0, a * (ang + 1.0));\n\tfloat c_a = cos(0.5 * a);\n\tfloat l = r * c_a;\n\tfloat d = sdf_line(p, v1, v2);\n\tif (hypocycloid && (d >= 0.0)) {\n\t\tvec2 c = (v1 + v2) / 2.0;\n\t\tfloat r2 = r * tan(0.5 * a);\n\t\tvec2 ce = c / (c_a * c_a);\n\t\td = (distance(p, ce) - r2) / (length(ce) - r2);\n\t\treturn d;\n\t}\n\treturn d / l;\n}\nSDF regular_polygon(vec2 st, vec2 center, float r, float rotation, const int edges) {\n\treturn regular_polygon(st, center, r, rotation, edges, false);\n}\nSDF regular_polygon(vec2 st, vec2 center, float r, const int edges, bool hypocycloid) {\n\treturn regular_polygon(st, center, r, 0.0, edges, true);\n}\nSDF regular_polygon(vec2 st, vec2 center, float r, const int edges) {\n\treturn regular_polygon(st, center, r, 0.0, edges, false);\n}\nUDF fill(SDF d, float start, float end, float smth_start, float smth_end) {\n\tsmth_start = (end - start) * smth_start;\n\tsmth_end = (end - start) * smth_end;\n\treturn smoothstep(start, start + smth_start, d) - smoothstep(end - smth_end, end, d);\n}\nUDF fill(SDF d, float start, float end, float smth) {\n\treturn fill(d, start, end, smth, smth);\n}\nUDF fill(SDF d, float start, float smth) {\n\treturn fill(d, start, 1.0, smth, 0.0);\n}\nUDF fill(SDF d, float smth) {\n\treturn fill(d, 0.0, 1.0, smth, 0.0);\n}\nUDF fill(SDF d) {\n\treturn fill(d, 0.0, 1.0, 0.0, 0.0);\n}\nUDF udf_intersect(UDF d1, UDF d2) {\n\tif ((d1 > 0.0) && (d2 > 0.0)) {\n\t\treturn min(d1, d2);\n\t}\n\treturn 0.0;\n}\nUDF udf_union(UDF d1, UDF d2) {\n\tif ((d1 > 0.0) || (d2 > 0.0)) {\n\t\treturn max(d1, d2);\n\t}\n\treturn 0.0;\n}\nUDF udf_complement(UDF d1, UDF d2) {\n\tif (((d1 > 0.0) && (d2 == 0.0)) || ((d1 == 0.0) && (d2 > 0.0)))\n\t\treturn 1.0;\n\treturn 0.0;\n}\n#pragma include <box>\n#pragma include <shapes>\n#endif\n"},function(e,t){e.exports="#ifndef M_COLOR\n#define M_COLOR\n#ifndef UDF\n#define UDF float\n#endif\nvec3 rgb2hsb(vec3 c) {\n\tvec4 K = vec4(0.0, -1.0 / 3.0, 2.0 / 3.0, -1.0);\n\tvec4 p = mix(vec4(c.bg, K.wz), vec4(c.gb, K.xy), step(c.b, c.g));\n\tvec4 q = mix(vec4(p.xyw, c.r), vec4(c.r, p.yzx), step(p.x, c.r));\n\tfloat d = q.x - min(q.w, q.y);\n\tfloat e = 1.0e-10;\n\treturn vec3(abs(q.z + ((q.w - q.y) / ((6.0 * d) + e))), d / (q.x + e), q.x);\n}\nvec3 hsb2rgb(vec3 c) {\n\tvec3 rgb = clamp(abs(mod((c.x * 6.0) + vec3(0.0, 4.0, 2.0), 6.0) - 3.0) - 1.0, 0.0, 1.0);\n\trgb = (rgb * rgb) * (3.0 - (2.0 * rgb));\n\treturn c.z * mix(vec3(1.0), rgb, c.y);\n}\nvec4 rgba_color(int r, int g, int b, float a) {\n\treturn vec4(float(r / 255), float(g / 255), float(b / 255), a);\n}\nvec4 rgba_color(float r, float g, float b, float a) {\n\treturn vec4(r, g, b, a);\n}\nvec4 rgba_color(vec4 v) {\n\treturn v;\n}\nvec4 rgba_color(vec3 v, float a) {\n\treturn vec4(v, a);\n}\nvec3 rgb_color(int r, int g, int b) {\n\treturn rgba_color(r, g, b, 1.0).rgb;\n}\nvec3 rgb_color(float r, float g, float b) {\n\treturn rgba_color(r, g, b, 1.0).rgb;\n}\nvec3 rgb_color(vec3 v) {\n\treturn vec4(v, 1.0).rgb;\n}\nvec4 hsba_color(float h, float s, float b, float a) {\n\treturn vec4(hsb2rgb(vec3(h, s, b)), a);\n}\nvec4 hsba_color(vec4 v) {\n\treturn vec4(hsb2rgb(v.xyz), v.w);\n}\nvec4 hsba_color(vec3 v, float a) {\n\treturn vec4(hsb2rgb(v), a);\n}\nvec3 hsb_color(float h, float s, float b) {\n\treturn hsba_color(h, s, b, 1.0).rgb;\n}\nvec3 hsb_color(vec3 v) {\n\treturn hsba_color(v, 1.0).rgb;\n}\n#ifndef RGB\n#define RGB rgb_color\n#endif\n#ifndef RGBA\n#define RGBA rgba_color\n#endif\n#ifndef HSB\n#define HSB hsb_color\n#endif\n#ifndef HSBA\n#define HSBA hsba_color\n#endif\nvoid color(UDF d, vec4 c1, vec4 c2) {\n\tgl_FragColor = mix(c2, c1, d);\n}\nvoid color(UDF d, vec4 c1, vec3 c2) {\n\tcolor(d, c1, vec4(c2, 1.0));\n}\nvoid color(UDF d, vec3 c1, vec4 c2) {\n\tcolor(d, vec4(c1, 1.0), c2);\n}\nvoid color(UDF d, vec3 c1, vec3 c2) {\n\tcolor(d, vec4(c1, 1.0), vec4(c2, 1.0));\n}\nvoid color(UDF d, vec4 c) {\n\tcolor(d, c, gl_FragColor);\n}\nvoid color(UDF d, vec3 c) {\n\tcolor(d, vec4(c, 1.0), gl_FragColor);\n}\n#endif\n"},function(e,t){e.exports="#ifndef M_PATTERN\n#define M_PATTERN\nvec2 grid_xy(vec2 st, vec2 grid) {\n\treturn fract(st * grid);\n}\nvoid grid_overlap(vec2 st, vec2 grid, inout vec2 overlap[4]) {\n\tvec2 v = fract(st * grid);\n\toverlap[0] = v;\n\toverlap[1] = v - vec2(1.0, 0.0);\n\toverlap[2] = v - vec2(0.0, 1.0);\n\toverlap[3] = v - vec2(1.0, 1.0);\n}\nvec2 grid_index(vec2 st, vec2 grid) {\n\treturn floor(st * grid);\n}\nbool grid_odd_row(vec2 idx, vec2 grid) {\n\treturn mod(idx.y, 2.0) != 0.0;\n}\nbool grid_even_row(vec2 idx, vec2 grid) {\n\treturn mod(idx.y, 2.0) == 0.0;\n}\nbool grid_odd_col(vec2 idx, vec2 grid) {\n\treturn mod(idx.x, 2.0) != 0.0;\n}\nbool grid_even_col(vec2 idx, vec2 grid) {\n\treturn mod(idx.x, 2.0) == 0.0;\n}\nbool grid_odd(vec2 idx, vec2 grid) {\n\treturn ((mod(idx.x, 2.0) != 0.0) && (mod(idx.y, 2.0) == 0.0)) || ((mod(idx.x, 2.0) == 0.0) && (mod(idx.y, 2.0) != 0.0));\n}\nbool grid_even(vec2 idx, vec2 grid) {\n\treturn !grid_odd(idx, grid);\n}\n#ifndef OCTAVES\n#define OCTAVES 6\n#endif\nfloat mist(vec2 st) {\n\tfloat value = 0.0;\n\tfloat amplitude = 0.5;\n\tfloat frequency = 0.0;\n\tfor (int i = 0; i < OCTAVES; i++) {\n\t\tvalue += (amplitude * noise(st));\n\t\tst *= 2.0;\n\t\tamplitude *= 0.5;\n\t}\n\treturn value;\n}\nfloat juila_set(vec2 st, vec2 center, float dist, vec2 c, float scale) {\n\tconst int max_iterations = 255;\n\tvec2 uv = 2.5 * (st - center);\n\tint count = max_iterations;\n\tfor (int i = 0; i < max_iterations; i++) {\n\t\tuv = c + vec2((uv.x * uv.x) - (uv.y * uv.y), (uv.x * uv.y) * 2.0);\n\t\tif (dot(uv, uv) > 4.0) {\n\t\t\tcount = i;\n\t\t\tbreak;\n\t\t}\n\t}\n\treturn float(count) * scale;\n}\n#endif\n"},function(e,t,n){"use strict";n.r(t);var r=n(36).default;r.autoLoad(),t.default=r},function(e,t){e.exports=function(e){if(Array.isArray(e))return e},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t){e.exports=function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a=[],i=!0,s=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){s=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(s)throw o}}return a}},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t){e.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t,n){var r=n(4);e.exports=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=r(e)););return e},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t){function n(t,r){return e.exports=n=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},e.exports.default=e.exports,e.exports.__esModule=!0,n(t,r)}e.exports=n,e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t){e.exports=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t,n){var r=function(e){"use strict";var t=Object.prototype,n=t.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",a=r.asyncIterator||"@@asyncIterator",i=r.toStringTag||"@@toStringTag";function s(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(e){s=function(e,t,n){return e[t]=n}}function c(e,t,n,r){var o=t&&t.prototype instanceof l?t:l,a=Object.create(o.prototype),i=new E(r||[]);return a._invoke=function(e,t,n){var r="suspendedStart";return function(o,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw a;return F()}for(n.method=o,n.arg=a;;){var i=n.delegate;if(i){var s=x(i,n);if(s){if(s===d)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var c=u(e,t,n);if("normal"===c.type){if(r=n.done?"completed":"suspendedYield",c.arg===d)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(r="completed",n.method="throw",n.arg=c.arg)}}}(e,n,i),a}function u(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=c;var d={};function l(){}function f(){}function v(){}var p={};s(p,o,(function(){return this}));var h=Object.getPrototypeOf,m=h&&h(h(D([])));m&&m!==t&&n.call(m,o)&&(p=m);var _=v.prototype=l.prototype=Object.create(p);function b(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function g(e,t){var r;this._invoke=function(o,a){function i(){return new t((function(r,i){!function r(o,a,i,s){var c=u(e[o],e,a);if("throw"!==c.type){var d=c.arg,l=d.value;return l&&"object"==typeof l&&n.call(l,"__await")?t.resolve(l.__await).then((function(e){r("next",e,i,s)}),(function(e){r("throw",e,i,s)})):t.resolve(l).then((function(e){d.value=e,i(d)}),(function(e){return r("throw",e,i,s)}))}s(c.arg)}(o,a,r,i)}))}return r=r?r.then(i,i):i()}}function x(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,x(e,t),"throw"===t.method))return d;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return d}var r=u(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,d;var o=r.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function y(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function w(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function E(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(y,this),this.reset(!0)}function D(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,a=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:F}}function F(){return{value:void 0,done:!0}}return f.prototype=v,s(_,"constructor",v),s(v,"constructor",f),f.displayName=s(v,i,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,s(e,i,"GeneratorFunction")),e.prototype=Object.create(_),e},e.awrap=function(e){return{__await:e}},b(g.prototype),s(g.prototype,a,(function(){return this})),e.AsyncIterator=g,e.async=function(t,n,r,o,a){void 0===a&&(a=Promise);var i=new g(c(t,n,r,o),a);return e.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},b(_),s(_,i,"Generator"),s(_,o,(function(){return this})),s(_,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=D,E.prototype={constructor:E,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(w),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return i.type="throw",i.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var s=n.call(a,"catchLoc"),c=n.call(a,"finallyLoc");if(s&&c){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,d):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),w(n),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;w(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:D(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),d}},e}(e.exports);try{regeneratorRuntime=r}catch(e){"object"==typeof globalThis?globalThis.regeneratorRuntime=r:Function("r","regeneratorRuntime = r")(r)}},function(e,t,n){var r=n(11);e.exports=function(e){if(Array.isArray(e))return r(e)},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t){e.exports=function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t){e.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return ce}));var r=n(2),o=n.n(r),a=n(1),i=n.n(a),s=n(5),c=n.n(s),u=n(6),d=n.n(u),l=n(7),f=n.n(l),v=n(12),p=n.n(v),h=n(13),m=n.n(h),_=n(4),b=n.n(_),g=n(3),x=n.n(g),y=n(0),w=n.n(y),E=n(14),D=n.n(E),F=n(9),A=n.n(F);function T(e,t){var n=function(e,t){for(var n=["webgl","experimental-webgl","webkit-3d","moz-webgl"],r=null,o=0;o<n.length;++o){try{r=e.getContext(n[o],t)}catch(e){}if(r)break}return r}(e,t);if(!n)throw new Error("Sorry, your browser doesn't support WebGL.");return n}function R(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Float32Array,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(n&&!(n instanceof t))throw new TypeError("Wrong buffer type.");if(null==e)return e;if(e instanceof t)return e;if(null==e[0]||null==e[0].length)return n?(n.set(e,0),n):new t(e);var r=e[0].length,o=e.length;n||(n=new t(r*o));for(var a=0,i=0;i<o;i++)for(var s=0;s<r;s++)n[a++]=e[i][s];return n}var U={};var S={};function k(){return(k=i()(w.a.mark((function e(t){var n,r;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!S[t]){e.next=2;break}return e.abrupt("return",S[t]);case 2:return e.next=4,fetch(t);case 4:if(!((n=e.sent).status>=200&&n.status<300)){e.next=11;break}return e.next=8,n.text();case 8:return r=e.sent,S[t]=r,e.abrupt("return",r);case 11:throw new Error("Shader loaded error.");case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var O=n(15),P=n.n(O),B=n(8),I=n.n(B),L=n(16),M=n.n(L),C={};function N(e,t,n){return e.activeTexture(e.TEXTURE0+n),Array.isArray(t._img)?e.bindTexture(e.TEXTURE_CUBE_MAP,t):e.bindTexture(e.TEXTURE_2D,t),t}var j={int:"1i",ivec2:"2i",ivec3:"3i",ivec4:"4i",float:"1f",vec2:"2f",vec3:"3f",vec4:"4f",mat2:"Matrix2fv",mat3:"Matrix3fv",mat4:"Matrix4fv",sampler1D:"sampler1D",sampler2D:"sampler2D",sampler3D:"sampler3D",samplerCube:"samplerCube",sampler1DShadow:"sampler1DShadow",sampler2DShadow:"sampler2DShadow",sampler2DRect:"sampler2DRect",sampler2DRectShadow:"sampler2DRectShadow"},G=function(){function e(t){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};c()(this,e),this.options=Object.assign({},e.defaultOptions,r),this.canvas=t,this.options.webgl2&&(n=t.getContext("webgl2",this.options)),null==n&&(n=T(t,this.options),this.aia_ext=n.getExtension("ANGLE_instanced_arrays")),this.gl=n,n.viewport(0,0,t.width,t.height),n.clearColor(0,0,0,0),n.blendFuncSeparate(n.SRC_ALPHA,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA),this.programs=[],this._events={}}var t,n,r;return d()(e,[{key:"program",get:function(){var e=this.gl;return e.getParameter(e.CURRENT_PROGRAM)}},{key:"_declareUniform",value:function(e,t){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"1f",o=this.gl,a=o.getUniformLocation(e,t),i=this;if(/^sampler/.test(r)){var s=e._samplerMap,c=e._bindTextures;Object.defineProperty(e.uniforms,t,{get:function(){return n},set:function(e){n=e;var r=null!=s[t]?s[t]:c.length;c[r]=e,N(o,e,r),s[t]||(s[t]=r,o.uniform1i(a,r)),i.options.autoUpdate&&i.update()},configurable:!1,enumerable:!0})}else{var u=0===r.indexOf("Matrix"),d=!u&&/v$/.test(r),l=o["uniform".concat(r)].bind(o);Object.defineProperty(e.uniforms,t,{get:function(){return n},set:function(e){n=e,"number"==typeof e&&(e=[e]),u?l(a,!1,e):d?l(a,e):l.apply(void 0,[a].concat(D()(e))),i.options.autoUpdate&&i.update()},configurable:!1,enumerable:!0})}}},{key:"_draw",value:function(){var t=this,n=this.program;n.meshData.forEach((function(r,a){var i=r.positions,s=r.cells,c=r.instanceCount,u=r.cellsCount,d=r.attributes,l=r.uniforms,f=r.textureCoord,v=r.enableBlend,p=t.gl,h=null!=r.mode?r.mode:p.TRIANGLES;"string"==typeof h&&(h=p[h]),v?p.enable(p.BLEND):p.disable(p.BLEND),p.bindBuffer(p.ARRAY_BUFFER,n._buffers.verticesBuffer),p.bufferData(p.ARRAY_BUFFER,i,p.STATIC_DRAW),s&&(p.bindBuffer(p.ELEMENT_ARRAY_BUFFER,n._buffers.cellsBuffer),p.bufferData(p.ELEMENT_ARRAY_BUFFER,s,p.STATIC_DRAW));var m,_=[];if(d&&Object.values(d).forEach((function(e){var r=e.name,o=e.data,a=e.divisor;if(p.bindBuffer(p.ARRAY_BUFFER,n._buffers[r]),p.bufferData(p.ARRAY_BUFFER,o,p.STATIC_DRAW),null!=a){var i=p.getAttribLocation(n,r);i>=0&&(p.enableVertexAttribArray(i),_.push(i),p.vertexAttribDivisor?p.vertexAttribDivisor(i,a):t.aia_ext&&t.aia_ext.vertexAttribDivisorANGLE(i,a))}})),l&&Object.entries(l).forEach((function(e){var n=o()(e,2),r=n[0],a=n[1];t.uniforms[r]=a})),!s){var b=n._dimension;m=i.length/b}if(n._enableTextures&&n._buffers.texCoordBuffer){var g=f||function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3,n=[],r=e.length,o=0;o<r;o++)o%t<2&&n.push(.5*(e[o]+1));return n}(i,n._dimension);p.bindBuffer(p.ARRAY_BUFFER,n._buffers.texCoordBuffer),p.bufferData(p.ARRAY_BUFFER,e.FLOAT(g),p.STATIC_DRAW)}null!=c?(s?p.drawElementsInstanced?p.drawElementsInstanced(h,u,p.UNSIGNED_SHORT,0,c):t.aia_ext&&t.aia_ext.drawElementsInstancedANGLE(h,u,p.UNSIGNED_SHORT,0,c):p.drawArraysInstanced?p.drawArraysInstanced(h,0,m,c):t.aia_ext.drawArraysInstancedANGLE(h,0,m,c),_.forEach((function(e){p.vertexAttribDivisor?p.vertexAttribDivisor(e,null):t.aia_ext&&t.aia_ext.vertexAttribDivisorANGLE(e,null)}))):s?p.drawElements(h,u,p.UNSIGNED_SHORT,0):p.drawArrays(h,0,m)}))}},{key:"isWebGL2",get:function(){return"undefined"!=typeof WebGL2RenderingContext&&this.gl instanceof WebGL2RenderingContext}},{key:"enableTextures",get:function(){return this.program&&this.program._enableTextures}},{key:"uniforms",get:function(){var e=this.program;if(!e||!e.uniforms)throw Error("No avaliable program.");return e.uniforms}},{key:"deleteProgram",value:function(e){var t=this.gl;this.program===e&&(this.startRender=!1,this._renderFrameID&&(cancelAnimationFrame(this._renderFrameID),delete this._renderFrameID),t.useProgram(null));var n=this.programs.indexOf(e);n>=0&&this.programs.splice(n,1),function(e,t){var n=t._buffers;Object.values(n).forEach((function(t){e.deleteBuffer(t)})),t._buffers={}}(t,e),t.deleteProgram(e)}},{key:"setMeshData",value:function(t){var n=this;Array.isArray(t)||(t=[t]);var r=this.program;r.meshData=t.map((function(t){var a=t.mode,i=t.positions,s=t.instanceCount,c=t.cells,u=t.cellsCount,d=t.attributes,l=t.uniforms,f=t.textureCoord,v=t.enableBlend,p={positions:e.FLOAT(i),uniforms:l,enableBlend:!!v,textureCoord:e.FLOAT(f)};if(c&&(p.cells=e.USHORT(c),p.cellsCount=u||p.cells.length),null!=a&&(p.mode=a),null!=s){if(!n.isWebGL2&&!n.aia_ext)throw new Error("Cannot use instanceCount in this rendering context, use webgl2 context instead.");p.instanceCount=s}if(d){var h={};Object.entries(d).forEach((function(t){var a=o()(t,2),i=a[0],s=a[1];if(r._attribute[i]){if("ignored"!==r._attribute[i]){var c=r._attribute[i],u=c.name,d=c.type,l=s.data||s;if(Array.isArray(l)&&(l=e[d](l)),h[i]={name:u,data:l},null!=s.divisor){if(!n.isWebGL2&&!n.aia_ext)throw new Error("Cannot use divisor in this rendering context, use webgl2 context instead.");h[i].divisor=s.divisor}}}else __DEV__&&console.warn("Ignored attribute ".concat(i,".")),r._attribute[i]="ignored"})),p.attributes=h}return p})),this.options.autoUpdate&&this.update()}},{key:"createProgram",value:function(e,t){var n=this,r=/^\s*uniform\s+sampler/gm.test(e);null==e&&(e=I.a),null==t&&(t=r?M.a:P.a);var a=this.gl,i=function(e,t,n){var r=e.createShader(e.VERTEX_SHADER);if(e.shaderSource(r,t),e.compileShader(r),!e.getShaderParameter(r,e.COMPILE_STATUS)){var o="Vertex shader failed to compile.  The error log is:".concat(e.getShaderInfoLog(r));throw new Error(o)}var a=e.createShader(e.FRAGMENT_SHADER);if(e.shaderSource(a,n),e.compileShader(a),!e.getShaderParameter(a,e.COMPILE_STATUS)){var i="Fragment shader failed to compile.  The error log is:".concat(e.getShaderInfoLog(a));throw new Error(i)}var s=e.createProgram();if(e.attachShader(s,r),e.attachShader(s,a),e.linkProgram(s),!e.getProgramParameter(s,e.LINK_STATUS)){var c="Shader program failed to link.  The error log is:".concat(e.getProgramInfoLog(s));throw new Error(c)}return e.deleteShader(r),e.deleteShader(a),s}(a,t,e);i.shaderText={vertexShader:t,fragmentShader:e},i._buffers={},i._attribute={},i.uniforms={},i._samplerMap={},i._bindTextures=[];var s=new RegExp("(?:attribute|in) vec(\\d) ".concat(this.options.vertexPosition),"im"),c=t.match(s);c&&(i._dimension=Number(c[1]));var u=new RegExp("(?:attribute|in) vec(\\d) ".concat(this.options.vertexTextureCoord),"im");(c=t.match(u))&&(i._texCoordSize=Number(c[1]));if(c=t.match(/^\s*(?:attribute|in) (\w+?)(\d*) (\w+)/gim))for(var d=0;d<c.length;d++){var l=c[d].match(/^\s*(?:attribute|in) (\w+?)(\d*) (\w+)/im);if(l&&l[3]!==this.options.vertexPosition&&l[3]!==this.options.vertexTextureCoord){var f=o()(l,4),v=f[1],p=f[2],h=f[3];"mat"===v&&(p=Math.pow(p,2)),i._buffers[h]=a.createBuffer(),i._attribute[h]={name:h,type:v,size:Number(p)||1}}}var m=/^\s*uniform\s+(\w+)\s+(\w+)(\[\d+\])?/gm;(c=(c=t.match(m)||[]).concat(e.match(m)||[])).forEach((function(e){var t=e.match(/^\s*uniform\s+(\w+)\s+(\w+)(\[\d+\])?/).slice(1),r=o()(t,3),a=r[0],s=r[1],c=r[2];c=!!c,0!==(a=j[a]).indexOf("Matrix")&&c&&(a+="v"),n._declareUniform(i,s,a)})),i._buffers.verticesBuffer=a.createBuffer(),i._buffers.cellsBuffer=a.createBuffer();var _=a.getAttribLocation(i,this.options.vertexTextureCoord);return i._enableTextures=_>=0,i._enableTextures&&(i._buffers.texCoordBuffer=a.createBuffer()),this.programs.push(i),i}},{key:"useProgram",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.startRender=!1,this._renderFrameID&&(cancelAnimationFrame(this._renderFrameID),delete this._renderFrameID);var n=this.gl;n.useProgram(e);var r=e._dimension;n.bindBuffer(n.ARRAY_BUFFER,e._buffers.verticesBuffer);var a=n.getAttribLocation(e,this.options.vertexPosition);if(n.vertexAttribPointer(a,r,n.FLOAT,!1,0,0),n.enableVertexAttribArray(a),e._enableTextures){n.bindBuffer(n.ARRAY_BUFFER,e._buffers.texCoordBuffer);var i=n.getAttribLocation(e,this.options.vertexTextureCoord);n.vertexAttribPointer(i,e._texCoordSize||2,n.FLOAT,!1,0,0),n.enableVertexAttribArray(i)}if(Object.entries(e._attribute).forEach((function(r){var a=o()(r,2),i=a[0],s=a[1];if("ignored"!==s){var c=s.size,u=t[i]||{},d=!!u.normalize,l=u.type||"FLOAT",f=u.key||i;"UBYTE"===l&&(l="UNSIGNED_BYTE"),"USHORT"===l&&(l="UNSIGNED_SHORT"),s.type=l,f&&f!==i&&(e._attribute[f]=s),n.bindBuffer(n.ARRAY_BUFFER,e._buffers[i]);var v=n.getAttribLocation(e,i);v>=0&&(n.vertexAttribPointer(v,c,n[l],d,0,0),n.enableVertexAttribArray(v))}})),!e.meshData){var s=[[-1,-1,0,1].slice(0,r),[1,-1,0,1].slice(0,r),[1,1,0,1].slice(0,r),[-1,1,0,1].slice(0,r)],c=[[0,1,3],[3,1,2]];this.setMeshData({positions:s,cells:c})}return e}},{key:"compileSync",value:function(e,t){e=e||I.a;var n={};function r(e){var t=[],o=(e=e.replace(/^\s*/gm,"")).match(/^#pragma\s+include\s+.*/gm);if(o){for(var a=0;a<o.length;a++){var i=o[a].match(/(?:<|")(.*)(?:>|")/);if(i){var s=0===i[0].indexOf("<")?"lib":"link",c=i[1];if("graph"===c&&(c="graphics"),n[c])t.push("/* included ".concat(c," */"));else if(n[c]=!0,"lib"===s){var u=r(C[c]);t.push(u)}else if("link"===s)throw new Error("Cannot load external links synchronously. Use compile instead of compileSync.")}}t.forEach((function(t){e=e.replace(/^#pragma\s+include\s+.*/m,t)}))}return e}var o=r(e),a=t?r(t):null;return this.createProgram(o,a)}},{key:"compile",value:(r=i()(w.a.mark((function t(n,r){var o,a,s,c,u,d;return w.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s=function(){return(s=i()(w.a.mark((function t(n){var r,i,s,c,u,d,l,f,v;return w.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=n.replace(/^\s*/gm,""),r=[],!(i=n.match(/^#pragma\s+include\s+.*/gm))){t.next=36;break}s=0;case 5:if(!(s<i.length)){t.next=35;break}if(c=i[s],!(u=c.match(/(?:<|")(.*)(?:>|")/))){t.next=32;break}if(d=0===u[0].indexOf("<")?"lib":"link","graph"===(l=u[1])&&(l="graphics"),o[l]){t.next=31;break}if(o[l]=!0,"lib"!==d){t.next=21;break}return t.next=17,a(C[l]);case 17:f=t.sent,r.push(f),t.next=29;break;case 21:if("link"!==d){t.next=29;break}return t.next=24,e.fetchShader(l);case 24:return v=t.sent,t.next=27,a(v);case 27:v=t.sent,r.push(v);case 29:t.next=32;break;case 31:r.push("/* included ".concat(l," */"));case 32:s++,t.next=5;break;case 35:r.forEach((function(e){n=n.replace(/^#pragma\s+include\s+.*/m,e)}));case 36:return t.abrupt("return",n);case 37:case"end":return t.stop()}}),t)})))).apply(this,arguments)},a=function(e){return s.apply(this,arguments)},n=n||I.a,o={},t.next=6,a(n);case 6:if(c=t.sent,!r){t.next=13;break}return t.next=10,a(r);case 10:t.t0=t.sent,t.next=14;break;case 13:t.t0=null;case 14:return u=t.t0,d=this.createProgram(c,u),t.abrupt("return",d);case 17:case"end":return t.stop()}}),t,this)}))),function(e,t){return r.apply(this,arguments)})},{key:"load",value:(n=i()(w.a.mark((function t(n){var r,o=arguments;return w.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=o.length>1&&void 0!==o[1]?o[1]:null,t.next=3,e.fetchShader(n);case 3:if(n=t.sent,!r){t.next=8;break}return t.next=7,e.fetchShader(r);case 7:r=t.sent;case 8:return t.abrupt("return",this.compile(n,r));case 9:case"end":return t.stop()}}),t,this)}))),function(e){return n.apply(this,arguments)})},{key:"createTexture",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.wrapS,o=void 0===r?this.gl.CLAMP_TO_EDGE:r,a=n.wrapT,i=void 0===a?this.gl.CLAMP_TO_EDGE:a,s=n.minFilter,c=void 0===s?this.gl.LINEAR:s,u=n.magFilter,d=void 0===u?this.gl.LINEAR:u,l=this.gl,f=Array.isArray(t)?l.TEXTURE_CUBE_MAP:l.TEXTURE_2D;this._max_texture_image_units=this._max_texture_image_units||l.getParameter(l.MAX_COMBINED_TEXTURE_IMAGE_UNITS),l.activeTexture(l.TEXTURE0+this._max_texture_image_units-1);var v=l.createTexture();l.bindTexture(f,v),l.pixelStorei(l.UNPACK_FLIP_Y_WEBGL,!0);var p=this.canvas,h=p.width,m=p.height;if(t)if(f===l.TEXTURE_CUBE_MAP)for(var _=0;_<6;_++)l.texImage2D(l.TEXTURE_CUBE_MAP_POSITIVE_X+_,0,l.RGBA,l.RGBA,l.UNSIGNED_BYTE,t[_]);else l.texImage2D(f,0,l.RGBA,l.RGBA,l.UNSIGNED_BYTE,t);else if(f===l.TEXTURE_CUBE_MAP)for(var b=0;b<6;b++)this.gl.texImage2D(this.gl.TEXTURE_CUBE_MAP_POSITIVE_X+b,0,l.RGBA,h,m,0,l.RGBA,l.UNSIGNED_BYTE,null);else l.texImage2D(f,0,l.RGBA,h,m,0,l.RGBA,l.UNSIGNED_BYTE,null);return l.texParameteri(f,l.TEXTURE_MIN_FILTER,c),l.texParameteri(f,l.TEXTURE_MAG_FILTER,d),l.texParameteri(f,l.TEXTURE_WRAP_S,o),l.texParameteri(f,l.TEXTURE_WRAP_T,i),f===l.TEXTURE_CUBE_MAP&&(t.width=t[0].width,t.height=t[0].height),l.bindTexture(f,null),v._img=t||{width:h,height:m},v.delete=function(){e.deleteTexture(v)},v}},{key:"deleteTexture",value:function(e){var t=e._img;this.gl.deleteTexture(e),"function"==typeof t.close&&t.close()}},{key:"loadTexture",value:(t=i()(w.a.mark((function t(n){var r,o,a,i,s=arguments;return w.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=s.length>1&&void 0!==s[1]?s[1]:{},o=r.useImageBitmap,a=void 0===o||o,t.next=3,e.loadImage(n,{useImageBitmap:a});case 3:return i=t.sent,t.abrupt("return",this.createTexture(i));case 5:case"end":return t.stop()}}),t,this)}))),function(e){return t.apply(this,arguments)})},{key:"createFBO",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.color,n=void 0===t?1:t,r=e.blend,o=void 0!==r&&r,a=e.depth,i=void 0===a?!1!==this.options.depth:a,s=e.stencil,c=void 0===s?!!this.options.stencil:s,u=this.gl,d=u.createFramebuffer();u.bindFramebuffer(u.FRAMEBUFFER,d);for(var l=[],f=0;f<n;f++){var v=this.createTexture();u.framebufferTexture2D(u.FRAMEBUFFER,u.COLOR_ATTACHMENT0+f,u.TEXTURE_2D,v,0),l.push(v)}d.textures=l,d.texture=l[0],d.blend=o;var p=this.canvas,h=p.width,m=p.height;return i&&!c&&(d.depthBuffer=u.createRenderbuffer(),u.bindRenderbuffer(u.RENDERBUFFER,d.depthBuffer),u.renderbufferStorage(u.RENDERBUFFER,u.DEPTH_COMPONENT16,h,m),u.framebufferRenderbuffer(u.FRAMEBUFFER,u.DEPTH_ATTACHMENT,u.RENDERBUFFER,d.depthBuffer)),c&&!i&&(d.stencilBuffer=u.createRenderbuffer(),u.bindRenderbuffer(u.RENDERBUFFER,d.stencilBuffer),u.renderbufferStorage(u.RENDERBUFFER,u.STENCIL_INDEX8,h,m),u.framebufferRenderbuffer(u.FRAMEBUFFER,u.STENCIL_ATTACHMENT,u.RENDERBUFFER,d.stencilBuffer)),i&&c&&(d.depthStencilBuffer=u.createRenderbuffer(),u.bindRenderbuffer(u.RENDERBUFFER,d.depthStencilBuffer),u.renderbufferStorage(u.RENDERBUFFER,u.DEPTH_STENCIL,h,m),u.framebufferRenderbuffer(u.FRAMEBUFFER,u.DEPTH_STENCIL_ATTACHMENT,u.RENDERBUFFER,d.depthStencilBuffer)),u.bindFramebuffer(u.FRAMEBUFFER,null),d}},{key:"bindFBO",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.fbo=e}},{key:"render",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.clearBuffer;this.startRender=!0;var t=this.gl,n=this.program;n||(n=this.createProgram(),this.useProgram(n)),this.fbo&&t.bindFramebuffer(t.FRAMEBUFFER,this.fbo);var r=this.options.depth;r&&t.enable(t.DEPTH_TEST),this.gl.clear(this.gl.COLOR_BUFFER_BIT|(r?this.gl.DEPTH_BUFFER_BIT:0)|(this.options.stencil?this.gl.STENCIL_BUFFER_BIT:0));var o=this._renderFrameID;this._draw(),this.fbo&&t.bindFramebuffer(t.FRAMEBUFFER,null),this._renderFrameID===o&&(this._renderFrameID=null)}},{key:"update",value:function(){this.startRender&&null==this._renderFrameID&&(this._renderFrameID=requestAnimationFrame(this.render.bind(this)))}}],[{key:"addLibs",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object.assign(C,e)}},{key:"FLOAT",value:function(e,t){return R(e,Float32Array,t)}},{key:"UNSIGNED_BYTE",value:function(e,t){return R(e,Uint8Array,t)}},{key:"UNSIGNED_SHORT",value:function(e,t){return R(e,Uint16Array,t)}},{key:"BYTE",value:function(e,t){return R(e,Int8Array,t)}},{key:"SHORT",value:function(e,t){return R(e,Int16Array,t)}}]),e}();x()(G,"defaultOptions",{preserveDrawingBuffer:!0,autoUpdate:!0,vertexPosition:"a_vertexPosition",vertexTextureCoord:"a_vertexTextureCoord",webgl2:!1}),x()(G,"UBYTE",G.UNSIGNED_BYTE),x()(G,"USHORT",G.UNSIGNED_SHORT),x()(G,"fetchShader",(function(e){return k.apply(this,arguments)})),x()(G,"loadImage",(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.useImageBitmap,r=void 0===n||n,o=t.alias,a=void 0===o?null:o;if(!U[e])if("function"==typeof Image){var i=new Image;"string"!=typeof e||"object"===("undefined"==typeof location?"undefined":A()(location))&&/^file:/.test(location.href)||/^data:/.test(e)||(i.crossOrigin="anonymous"),U[e]=new Promise((function(t){i.onload=function(){r&&"function"==typeof createImageBitmap?createImageBitmap(i,{imageOrientation:"flipY"}).then((function(n){U[e]=n,a&&(U[a]=n),t(n)})):(U[e]=i,a&&(U[a]=i),t(i))},i.src=e})),a&&(U[a]=U[e])}else if("function"==typeof fetch)return fetch(e,{method:"GET",mode:"cors",cache:"default"}).then((function(e){return e.blob()})).then((function(t){return createImageBitmap(t,{imageOrientation:"flipY"}).then((function(t){return U[e]=t,a&&(U[a]=t),t}))}));return U[e]}));var H=G,X=n(17),Y=n.n(X),q=n(18),z=n.n(q),W=n(19),V=n.n(W),K=n(20),$=n.n(K),J=n(21),Q=n.n(J),Z=n(22),ee=n.n(Z),te=n(23),ne=n.n(te),re=n(24),oe=n.n(re);function ae(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=b()(e);if(t){var o=b()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return m()(this,n)}}H.addLibs({stdlib:Y.a,box:$.a,transform:Q.a,graphics:ee.a,color:ne.a,pattern:oe.a,shapes:z.a,shaper:V.a});var ie=Symbol("eventHandlers");function se(e,t){var n=t.target.getBoundingClientRect(),r=n.left,o=n.top,a=t.changedTouches?t.changedTouches[0]:t,i=a.clientX,s=a.clientY;return[(i-r)/e.clientWidth,1-(s-o)/e.clientHeight]}var ce=function(e){p()(r,e);var t,n=ae(r);function r(){return c()(this,r),n.apply(this,arguments)}return d()(r,[{key:"compile",value:(t=i()(w.a.mark((function e(t,n){var o,a,i,s=this;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.options.webgl2&&(n="#version 300 es\nprecision highp float;\nprecision highp int;\n\nin vec3 a_vertexPosition;\n\nvoid main() {\n  gl_PointSize = 1.0;\n  gl_Position = vec4(a_vertexPosition, 1);\n}"),e.next=3,f()(b()(r.prototype),"compile",this).call(this,t,n);case 3:if(o=e.sent,a=o.shaderText.fragmentShader,!(i=a.match(/^#pragma\s+texture\s+.*/gm))){e.next=10;break}return e.next=9,Promise.all(i.map((function(e){var t=e.match(/^#pragma\s+texture\s+(.*)/);return s.loadTexture(t[1])})));case 9:this._preloadedTextures=e.sent;case 10:return e.abrupt("return",o);case 11:case"end":return e.stop()}}),e,this)}))),function(e,n){return t.apply(this,arguments)})},{key:"setFeebackContext",value:function(){if(!this.options.preserveDrawingBuffer)throw new Error("Must set preserveDrawingBuffer to true while using feedback mode.");var e;this.feedbackContext||(e="function"==typeof OffscreenCanvas?new OffscreenCanvas(this.canvas.width,this.canvas.height):this.canvas.cloneNode(),this.feedbackContext=e.getContext("2d"))}},{key:"useProgram",value:function(e,t){var n=this,a=this.gl.canvas;this[ie]&&this[ie].forEach((function(e){var t=e.event,n=e.handler;"keydown"===t||"keyup"===t?document.removeEventListener(t,n):a.removeEventListener(t,n)})),delete this.startRenderTime,f()(b()(r.prototype),"useProgram",this).call(this,e,t),this[ie]=[],this._preloadedTextures&&(this._preloadedTextures.forEach((function(t,n){var r="dd_sampler".concat(n);r in e.uniforms&&(e.uniforms[r]=t)})),delete this._preloadedTextures);var i=this.uniforms;if("dd_frameIndex"in i&&(this.uniforms.dd_frameIndex=0),"dd_randseed0"in i&&(this.uniforms.dd_randseed0=[Math.random(),Math.random()]),"dd_randseed"in i&&(this.uniforms.dd_randseed=this.uniforms.dd_randseed0||[Math.random(),Math.random()]),"dd_resolution"in i&&(this.uniforms.dd_resolution=[a.width,a.height]),"dd_mouseEvent"in i){this.uniforms.dd_mouseEvent=0;var s=function(){n.uniforms.dd_mouseEvent=1},c=function(){n.uniforms.dd_mouseEvent=2},u=function(){n.uniforms.dd_mouseEvent=3};a.addEventListener("mousedown",s),a.addEventListener("mouseup",c),a.addEventListener("mousewheel",u),this[ie].push({event:"mousedown",mousedown:s},{event:"mouseup",mouseup:c},{event:"mousewheel",mousewheel:u})}if("dd_mousePosition"in i){this.uniforms.dd_mousePosition=[-1,-1];var d=function(e){var t=se(a,e),r=o()(t,2),i=r[0],s=r[1];n.uniforms.dd_mousePosition=[i,s]},l=function(e){n.uniforms.dd_mousePosition=[-1,-1]};a.addEventListener("mousemove",d),a.addEventListener("mouseleave",l),this[ie].push({event:"mousemove",mousemove:d},{event:"mouseleave",mouseleave:l})}if("dd_mouseButtons"in i){this.uniforms.dd_mouseButtons=0;var v=function(e){n.uniforms.dd_mouseButtons=e.buttons},p=function(e){n.uniforms.dd_mouseButtons=e.buttons},h=function(e){n.uniforms.dd_mouseButtons=e.buttons},m=function(e){n.uniforms.dd_mouseButtons=0};a.addEventListener("mouseenter",v),a.addEventListener("mousedown",p),a.addEventListener("mouseup",h),a.addEventListener("mouseleave",m),this[ie].push({event:"mouseenter",mouseenter:v},{event:"mousedown",mousedown:p},{event:"mouseup",mouseup:h},{event:"mouseleave",mouseleave:m})}if("dd_keyEvent"in i){this.uniforms.dd_keyEvent=0;var _=function(e){n.uniforms.dd_keyEvent=1},g=function(e){n.uniforms.dd_keyEvent=2};document.addEventListener("keydown",_),document.addEventListener("keyup",g),this[ie].push({event:"keydown",keydown:_},{event:"keyup",keyup:g})}if("dd_keyCode"in i){this.uniforms.dd_keyCode=0;var x=function(e){n.uniforms.dd_keyCode=e.keyCode},y=function(e){n.uniforms.dd_keyCode=0};document.addEventListener("keydown",x),document.addEventListener("keyup",y),this[ie].push({event:"keydown",keydown:x},{event:"keyup",keyup:y})}if("dd_touchPosition"in i){this.uniforms.dd_touchPosition=[-1,-1];var w=function(e){var t=se(a,e),r=o()(t,2),i=r[0],s=r[1];n.uniforms.dd_touchPosition=[i,s]},E=function(e){var t=se(a,e),r=o()(t,2),i=r[0],s=r[1];n.uniforms.dd_touchPosition=[i,s]},D=function(e){n.uniforms.dd_touchPosition=[-1,-1]};a.addEventListener("touchstart",w),a.addEventListener("touchmove",E),a.addEventListener("touchend",D),this[ie].push({event:"touchstart",touchstart:w},{event:"touchmove",touchmove:E},{event:"touchend",touchend:D})}if("dd_touchEvent"in i){var F=function(e){n.uniforms.dd_touchEvent=1},A=function(e){n.uniforms.dd_touchEvent=3},T=function(e){n.uniforms.dd_touchEvent=2};a.addEventListener("touchstart",F),a.addEventListener("touchmove",A),a.addEventListener("touchend",T),this[ie].push({event:"touchstart",touchstart:F},{event:"touchmove",touchmove:A},{event:"touchend",touchend:T})}return"dd_samplerFeedback"in i&&this.setFeebackContext(),e}},{key:"render",value:function(){this.startRenderTime||(this.startRenderTime=Date.now());var e,t=(Date.now()-this.startRenderTime)/1e3,n=this.uniforms,o=this.gl;if("dd_time"in n&&(this.uniforms.dd_time=t),"dd_samplerFeedback"in n){var a=this.feedbackContext;a.canvas.width=o.canvas.width,a.canvas.height=o.canvas.height,a.drawImage(o.canvas,0,0),e=this.createTexture(a.canvas),n.dd_samplerFeedback=e}f()(b()(r.prototype),"render",this).call(this),e&&o.deleteTexture(e),"dd_time"in n&&this.update(),"dd_frameIndex"in n&&this.uniforms.dd_frameIndex++,"dd_randseed"in n&&(this.uniforms.dd_randseed=[Math.random(),Math.random()]),"dd_mouseEvent"in n&&(this.uniforms.dd_mouseEvent=0),"dd_keyEvent"in n&&(this.uniforms.dd_keyEvent=0),"dd_touchEvent"in n&&(this.uniforms.dd_touchEvent=0)}}],[{key:"autoLoad",value:function(){function e(){document.querySelectorAll("glsl-doodle").forEach(function(){var e=i()(w.a.mark((function e(t){var n,o,a,i,s,c,u,d,l,f,v;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.getAttribute("loaded")){e.next=2;break}return e.abrupt("return");case 2:if(n=t,t.attachShadow?n=t.attachShadow({mode:"open"}):t.createShadowRoot&&(n=t.createShadowRoot()),(o=document.createElement("canvas")).width=t.getAttribute("width")||512,o.height=t.getAttribute("height")||512,o.setAttribute("part","doodle"),n.appendChild(o),t.setAttribute("loaded","loaded"),a=t.hasAttribute("webgl2")&&"false"!==t.getAttribute("webgl2"),i=new r(o,{webgl2:a}),s=t.getAttribute("fragment-for")||t.getAttribute("for"),c=t.getAttribute("vertex-for"),u=null,d=null,!s){e.next=20;break}u=document.getElementById(s).textContent,e.next=25;break;case 20:return l=t.getAttribute("fragment-src")||t.getAttribute("src")||"./index.glsl",e.next=23,H.fetchShader(l);case 23:u=e.sent,/\.js$/.test(l)&&new Function("shader",u)((function(e){u=e.join("")}));case 25:if(!c){e.next=29;break}d=c.textContent,e.next=34;break;case 29:if(!(f=t.getAttribute("vert-src"))){e.next=34;break}return e.next=33,H.fetchShader(f);case 33:d=e.sent;case 34:return e.next=36,i.compile(u,d);case 36:v=e.sent,i.useProgram(v),i.render(),window.doodle=i;case 40:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}e(),window.addEventListener("DOMContentLoaded",e)}}]),r}(H);x()(ce,"defaultOptions",{preserveDrawingBuffer:!0})}]).default}));